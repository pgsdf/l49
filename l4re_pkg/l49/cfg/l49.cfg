-- SPDX-License-Identifier: MIT
-- Copyright (c) 2026 Pacific Grove Software Distribution Foundation

-- vim:set ft=lua:
local L4 = require("L4")
local l = L4.default_loader

local cons = l:new_channel()
l:start(
  { caps = { cons = cons:svr() }, log = L4.Env.log },
  "rom/cons -a"
)
l.log_fab = cons

local cons9p = l:new_channel()
l:start(
  { caps = { ep = cons9p:svr() }, log = L4.Env.log },
  "rom/p9cons"
)

local root9p = l:new_channel()
l:start(
  { caps = { ep = root9p:svr(), cons_ep = cons9p:clnt() }, log = L4.Env.log },
  "rom/p9root"
)

l:start(
  { caps = { root_ep = root9p:clnt() }, log = L4.Env.log },
  "rom/p9probe"
)
